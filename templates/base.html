<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <style>
        :root {
            --color-accent: {{ profile.color_accent }};
            --color-accent-light: {{ profile.color_accent_light }};
            --color-accent-dark: {{ profile.color_accent_dark }};
                }
        </style>
    <meta charset="UTF-8">
    <title>ChinguLoop</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% block extra_css %}{% endblock %}
    {% if request.user.is_authenticated %}
<style>
    :root {
      --color-accent: {{ request.user.profile.color_accent }};
      --color-accent-light: {{ request.user.profile.color_accent_light }};
      --color-accent-dark: {{ request.user.profile.color_accent_dark }};
    }
</style>
{% endif %}
</head>
<body class="private-bg">
    <header>
        <div class="header-left">
            <img src="{% static 'images/Logo.png' %}" alt="ChinguLoop Logo" class="logo">
            <h1>ChinguLoop</h1>
        </div>
        <div class="header-center">
            <input type="text" placeholder="ğŸ” Search ChinguLoop..." class="search-bar">
        </div>
        <div class="header-right">
            {% if request.user.is_authenticated %}
                <span>Hello, {{ request.user.username }} ğŸ’•</span>
                <form action="{% url 'logout' %}" method="post" class="logout-form">
                    {% csrf_token %}
                    <button type="submit">ğŸšª Log Out</button>
                </form>
            {% else %}
                <a href="{% url 'login' %}">ğŸ”‘ Log In</a>
                <a href="{% url 'register' %}">ğŸ“ Register</a>
            {% endif %}
        </div>
    </header>

    <div class="container">
        {% if request.user.is_authenticated %}
            <aside class="sidebar-left">
                <nav>
                    <a href="{% url 'home' %}">ğŸ     Home</a>
                    <a href="{% url 'profile' username=request.user.username %}">ğŸ‘¤  My Profile</a>
                    <a href="{% url 'create_post' %}">â• Create Post</a>
                    <a href="{% url 'conversation_list' %}">ğŸ’¬ Messages </a>
                </nav>
            </aside>
        {% endif %}

        <main>
            {% block content %}{% endblock %}
        </main>

        {% if request.user.is_authenticated %}
            <aside class="sidebar-right">
                {% if people_you_may_know %}
                    <div class="widget">
                        <h3>ğŸ‘¥ People You May Know</h3>
                        <ul class="people-list">
                            {% for person in people_you_may_know %}
                                <li>
                                    <a href="{% url 'profile' username=person.username %}">
                                        {% if person.profile.profile_picture %}
                                            <img src="{{ person.profile.profile_picture.url }}" alt="{{ person.username }}" class="pfp">
                                        {% else %}
                                            <img src="{% static 'images/default_pfp.png' %}" alt="default pfp" class="pfp">
                                        {% endif %}
                                        {{ person.username }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}

                <div class="widget">
                    <h3>ğŸ’¬ Latest Updates</h3>
                    <p>Stay tuned for new features!</p>
                </div>
            </aside>
        {% endif %}
    </div>

    <footer>
        <p>ğŸ’– Welcome to ChinguLoop ğŸ’–</p>
    </footer>
</body>
</html>
